<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=https://cloudprober.org/fonts/open-sans/open-sans-v35-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://cloudprober.org/fonts/open-sans/open-sans-v35-latin-italic.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://cloudprober.org/fonts/open-sans/open-sans-v35-latin-500.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://cloudprober.org/fonts/jost/jost-v14-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://cloudprober.org/fonts/jost/jost-v14-latin-500.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://cloudprober.org/fonts/jost/jost-v14-latin-italic.woff2 type=font/woff2 crossorigin><script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script><link rel=stylesheet href=https://cloudprober.org/main.b56984fec46c3d7a6da42898038ee6c05f5386fad2b5521c7d225290454d5d60663e5ed4443db6222473e12a20bfca5c19931b499ca8ee8cb967f74a43aa4ef6.css integrity="sha512-tWmE/sRsPXptpCiYA47mwF9ThvrStVIcfSJSkEVNXWBmPl7URD22IiRz4Sogv8pcGZMbSZyo7oy5Z/dKQ6pO9g==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Targets - Cloudprober</title><meta name=description content="Cloudprober probes usually run against some targets1 to check those targets' status, such as an HTTP probe to your APIs servers, or PING/TCP probes to a third-party provider to verify network connectivity to them. Each probe can have multiple targets. If a probe has multiple targets, Cloudprober runs parallel probes for each target. This page further explains how targets work in Cloudprober.
Dynamically Discovered Targets #One of the core features of Cloudprober is the automatic and continuous discovery of targets."><link rel=canonical href=https://cloudprober.org/docs/how-to/targets/><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="Targets"><meta property="og:description" content="Cloudprober probes usually run against some targets1 to check those targets' status, such as an HTTP probe to your APIs servers, or PING/TCP probes to a third-party provider to verify network connectivity to them. Each probe can have multiple targets. If a probe has multiple targets, Cloudprober runs parallel probes for each target. This page further explains how targets work in Cloudprober.
Dynamically Discovered Targets #One of the core features of Cloudprober is the automatic and continuous discovery of targets."><meta property="og:url" content="https://cloudprober.org/docs/how-to/targets/"><meta property="og:site_name" content="Cloudprober"><meta property="article:published_time" content="2016-10-25T17:24:32-07:00"><meta property="article:modified_time" content="2016-10-25T17:24:32-07:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@cloudprober"><meta name=twitter:creator content="@manugarg"><meta name=twitter:title content="Targets"><meta name=twitter:description content><meta name=twitter:card content="summary"><meta name=twitter:image:alt content="Targets"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://cloudprober.org/#/schema/organization/1","name":"Cloudprober","url":"https://cloudprober.org/","sameAs":["https://twitter.com/cloudprober","https://github.com/cloudprober/cloudprober"],"logo":{"@type":"ImageObject","@id":"https://cloudprober.org/#/schema/image/1","url":"https://cloudprober.org/\u003cnil\u003e","width":512,"height":512,"caption":"Cloudprober"},"image":{"@id":"https://cloudprober.org/#/schema/image/1"}},{"@type":"WebSite","@id":"https://cloudprober.org/#/schema/website/1","url":"https://cloudprober.org/","name":"Cloudprober","description":"An active\/synthetic monitoring software to reliably detect outages before your customers do.","publisher":{"@id":"https://cloudprober.org/#/schema/organization/1"}},{"@type":"WebPage","@id":"https://cloudprober.org/docs/how-to/targets/","url":"https://cloudprober.org/docs/how-to/targets/","name":"Targets","description":"","isPartOf":{"@id":"https://cloudprober.org/#/schema/website/1"},"about":{"@id":"https://cloudprober.org/#/schema/organization/1"},"datePublished":"2016-10-25T17:24:32CET","dateModified":"2016-10-25T17:24:32CET","breadcrumb":{"@id":"https://cloudprober.org/docs/how-to/targets/#/schema/breadcrumb/1"},"primaryImageOfPage":{"@id":"https://cloudprober.org/docs/how-to/targets/#/schema/image/2"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://cloudprober.org/docs/how-to/targets/"]}]},{"@type":"BreadcrumbList","@id":"https://cloudprober.org/docs/how-to/targets/#/schema/breadcrumb/1","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"https://cloudprober.org","url":"https://cloudprober.org","name":"Home"}},{"@type":"ListItem","position":3,"item":{"@type":"WebPage","@id":"https://cloudprober.org/docs/","url":"https://cloudprober.org/docs/","name":"Docs"}},{"@type":"ListItem","position":4,"item":{"@type":"WebPage","@id":"https://cloudprober.org/docs/how-to/","url":"https://cloudprober.org/docs/how-to/","name":"How To"}},{"@type":"ListItem","position":5,"item":{"@id":"https://cloudprober.org/docs/how-to/targets/"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Article","@id":"https://cloudprober.org/#/schema/article/1","headline":"Targets","description":"","isPartOf":{"@id":"https://cloudprober.org/docs/how-to/targets/"},"mainEntityOfPage":{"@id":"https://cloudprober.org/docs/how-to/targets/"},"datePublished":"2016-10-25T17:24:32CET","dateModified":"2016-10-25T17:24:32CET","author":{"@id":"https://cloudprober.org/#/schema/person/2"},"publisher":{"@id":"https://cloudprober.org/#/schema/organization/1"},"image":{"@id":"https://cloudprober.org/docs/how-to/targets/#/schema/image/2"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Person","@id":"https://cloudprober.org/#/schema/person/2","name":"Manu Garg","sameAs":["https://twitter.com/manugarg","https://www.linkedin.com/in/manugarg/","https://github.com/manugarg"]}]},{"@context":"https://schema.org","@graph":[{"@type":"ImageObject","@id":"https://cloudprober.org/docs/how-to/targets/#/schema/image/2","url":null,"contentUrl":null,"caption":"Targets"}]}]}</script><meta name=theme-color content="#fff"><link rel=icon href=https://cloudprober.org/favicon.ico sizes=any><link rel=apple-touch-icon sizes=180x180 href=https://cloudprober.org/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://cloudprober.org/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://cloudprober.org/favicon-16x16.png><link rel=manifest crossorigin=use-credentials href=https://cloudprober.org/site.webmanifest><script async src="https://www.googletagmanager.com/gtag/js?id=G-FHHPC1TNQV"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-FHHPC1TNQV")</script><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-79661-8","auto"),ga("set","anonymizeIp",!0),ga("send","pageview");var buttons=document.querySelectorAll("a"),query;Array.prototype.map.call(buttons,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var t=e.getAttribute("data-action")||"follow";ga("send","event","outbound",t,e.href)})}),query=document.querySelector(".query"),query&&query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})</script></head><body class="docs single"><div class=sticky-top><div class=header-bar></div><header class="navbar navbar-expand-lg navbar-light doks-navbar"><nav class="container-xxl flex-wrap flex-lg-nowrap" aria-label="Main navigation"><a class="navbar-brand order-0" href=https://cloudprober.org/ aria-label=Cloudprober>Cloudprober</a>
<button class="btn btn-menu order-2 d-block d-lg-none" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasDoks aria-controls=offcanvasDoks aria-label="Open main menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button><div class="offcanvas offcanvas-end border-0 py-lg-1" tabindex=-1 id=offcanvasDoks data-bs-backdrop=true aria-labelledby=offcanvasDoksLabel><div class="header-bar d-lg-none"></div><div class="offcanvas-header d-lg-none"><h2 class="h5 offcanvas-title ps-2" id=offcanvasDoksLabel><a class=text-dark href=https://cloudprober.org/>Cloudprober</a></h2><button type=button class="btn-close text-reset me-2" data-bs-dismiss=offcanvas aria-label="Close main menu"></button></div><div class="offcanvas-body p-4 p-lg-0"><ul class="nav flex-column flex-lg-row align-items-lg-center mt-2 mt-lg-0 ms-lg-2 me-lg-auto"><li class=nav-item><a class="nav-link ps-0 py-1" href=https://cloudprober.org/docs/overview/cloudprober>Get Started</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=https://cloudprober.org/docs/config/overview>Configuration</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=https://cloudprober.org/docs/how-to/external-probe>How-To</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=https://cloudprober.org/docs/surfacers/overview>Surfacers</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=https://cloudprober.org/docs/about/>About</a></li></ul><hr class="text-black-50 my-4 d-lg-none"><form class="doks-search position-relative flex-grow-1 ms-lg-auto me-lg-2"><input id=search class="form-control is-search" type=search placeholder aria-label autocomplete=off><div id=suggestions class="shadow bg-white rounded d-none"></div></form><hr class="text-black-50 my-4 d-lg-none"><ul class="nav flex-column flex-lg-row"><li class=nav-item><a class="nav-link social-link" href=https://github.com/cloudprober/cloudprober><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><small class="ms-2 d-lg-none">GitHub</small></a></li><li class=nav-item><a class="nav-link social-link" href=https://join.slack.com/t/cloudprober/shared_invite/enQtNjA1OTkyOTk3ODc3LWQzZDM2ZWUyNTI0M2E4NmM4NTIyMjM5M2E0MDdjMmU1NGQ3NWNiMjU4NTViMWMyMjg0M2QwMDhkZGZjZmFlNGE><svg xmlns="http://www.w3.org/2000/svg" class="feather social-slack" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22.08 9C19.81 1.41 16.54-.35 9 1.92S-.35 7.46 1.92 15 7.46 24.35 15 22.08 24.35 16.54 22.08 9z"/><line x1="12.57" y1="5.99" x2="16.15" y2="16.39"/><line x1="7.85" y1="7.61" x2="11.43" y2="18.01"/><line x1="16.39" y1="7.85" x2="5.99" y2="11.43"/><line x1="18.01" y1="12.57" x2="7.61" y2="16.15"/></svg><small class="ms-2 d-lg-none">Slack</small></a></li></ul><hr class="text-black-50 my-4 d-lg-none"><button id=mode class="btn btn-link" type=button aria-label="Toggle user interface mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button></div></div></nav></header></div><div class=container-xxl><aside class=doks-sidebar><nav id=doks-docs-nav class="collapse d-lg-none" aria-label="Tertiary navigation"><h3 class="h6 text-uppercase mb-2"><a class=docs-link href=https://cloudprober.org/docs/overview/cloudprober>Overview</a></h3><ul class=list-unstyled><li><a class=docs-link href=https://cloudprober.org/docs/overview/getting-started/>Getting Started</a></li><li><a class=docs-link href=https://cloudprober.org/docs/overview/probe/>What is a Probe</a></li></ul><h3 class="h6 text-uppercase mb-2"><a class=docs-link href=https://cloudprober.org/docs/config/overview>Configuration</a></h3><h3 class="h6 text-uppercase mb-2"><a class="docs-link active" href=https://cloudprober.org/docs/how-to/external-probe>How-To</a></h3><ul class=list-unstyled><li><a class=docs-link href=https://cloudprober.org/docs/how-to/external-probe/>External Probe</a></li><li><a class=docs-link href=https://cloudprober.org/docs/how-to/alerting/>Alerting</a></li><li><a class="docs-link active" href=https://cloudprober.org/docs/how-to/targets/>Targets</a></li><li><a class=docs-link href=https://cloudprober.org/docs/how-to/k8s_targets/>Kubernetes Targets</a></li><li><a class=docs-link href=https://cloudprober.org/docs/how-to/run-on-kubernetes/>Running On Kubernetes</a></li><li><a class=docs-link href=https://cloudprober.org/docs/how-to/additional-labels/>Additional Labels</a></li><li><a class=docs-link href=https://cloudprober.org/docs/how-to/validators/>Validators</a></li><li><a class=docs-link href=https://cloudprober.org/docs/how-to/percentiles/>Percentiles and Histograms</a></li><li><a class=docs-link href=https://cloudprober.org/docs/how-to/built-in-servers/>Built-in Servers</a></li><li><a class=docs-link href=https://cloudprober.org/docs/how-to/extensions/>Extending Cloudprober</a></li><li><a class=docs-link href=https://cloudprober.org/docs/how-to/rds/>Resource Discovery Service</a></li></ul><h3 class="h6 text-uppercase mb-2"><a class=docs-link href=https://cloudprober.org/docs/surfacers/overview>Surfacers</a></h3><ul class=list-unstyled><li><a class=docs-link href=https://cloudprober.org/docs/surfacers/overview/>Exporting Metrics (Surfacers)</a></li><li><a class=docs-link href=https://cloudprober.org/docs/surfacers/cloudwatch/>Cloudwatch (AWS)</a></li><li><a class=docs-link href=https://cloudprober.org/docs/surfacers/stackdriver/>Stackdriver (Google Cloud)</a></li></ul></nav></aside></div><div class="wrap container-xxl" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar d-none d-lg-block"><nav id=sidebar-default class=docs-links aria-label="Main navigation"><h3 class="h6 text-uppercase mb-2"><a class=docs-link href=https://cloudprober.org/docs/overview/cloudprober>Overview</a></h3><ul class=list-unstyled><li><a class=docs-link href=https://cloudprober.org/docs/overview/getting-started/>Getting Started</a></li><li><a class=docs-link href=https://cloudprober.org/docs/overview/probe/>What is a Probe</a></li></ul><h3 class="h6 text-uppercase mb-2"><a class=docs-link href=https://cloudprober.org/docs/config/overview>Configuration</a></h3><h3 class="h6 text-uppercase mb-2"><a class="docs-link active" href=https://cloudprober.org/docs/how-to/external-probe>How-To</a></h3><ul class=list-unstyled><li><a class=docs-link href=https://cloudprober.org/docs/how-to/external-probe/>External Probe</a></li><li><a class=docs-link href=https://cloudprober.org/docs/how-to/alerting/>Alerting</a></li><li><a class="docs-link active" href=https://cloudprober.org/docs/how-to/targets/>Targets</a></li><li><a class=docs-link href=https://cloudprober.org/docs/how-to/k8s_targets/>Kubernetes Targets</a></li><li><a class=docs-link href=https://cloudprober.org/docs/how-to/run-on-kubernetes/>Running On Kubernetes</a></li><li><a class=docs-link href=https://cloudprober.org/docs/how-to/additional-labels/>Additional Labels</a></li><li><a class=docs-link href=https://cloudprober.org/docs/how-to/validators/>Validators</a></li><li><a class=docs-link href=https://cloudprober.org/docs/how-to/percentiles/>Percentiles and Histograms</a></li><li><a class=docs-link href=https://cloudprober.org/docs/how-to/built-in-servers/>Built-in Servers</a></li><li><a class=docs-link href=https://cloudprober.org/docs/how-to/extensions/>Extending Cloudprober</a></li><li><a class=docs-link href=https://cloudprober.org/docs/how-to/rds/>Resource Discovery Service</a></li></ul><h3 class="h6 text-uppercase mb-2"><a class=docs-link href=https://cloudprober.org/docs/surfacers/overview>Surfacers</a></h3><ul class=list-unstyled><li><a class=docs-link href=https://cloudprober.org/docs/surfacers/overview/>Exporting Metrics (Surfacers)</a></li><li><a class=docs-link href=https://cloudprober.org/docs/surfacers/cloudwatch/>Cloudwatch (AWS)</a></li><li><a class=docs-link href=https://cloudprober.org/docs/surfacers/stackdriver/>Stackdriver (Google Cloud)</a></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=d-xl-none><button class="btn btn-outline-primary btn-sm doks-toc-toggle collapsed" type=button data-bs-toggle=collapse data-bs-target=#onThisPage aria-controls=doks-docs-nav aria-expanded=false aria-label="Toggle On this page navigation">
<span></span>
<span><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" class="doks doks-expand" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Expand</title><polyline points="7 13 12 18 17 13"/><polyline points="7 6 12 11 17 6"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" class="doks doks-collapse" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Collapse</title><polyline points="17 11 12 6 7 11"/><polyline points="17 18 12 13 7 18"/></svg></span></button><div class=collapse id=onThisPage><div class="card card-body mt-3 py-1"><div class=page-links><nav id=TableOfContents><ul><li><a href=#dynamically-discovered-targets>Dynamically Discovered Targets</a></li><li><a href=#targets-configuration>Targets Configuration</a><ul><li><a href=#static-targets>Static targets</a></li><li><a href=#file-based-targets>File based targets</a></li><li><a href=#k8s-targets>K8s targets</a></li><li><a href=#gcp-targets>GCP targets</a></li></ul></li><li><a href=#probe-configuration-through-target-fields>Probe configuration through target fields</a></li><li><a href=#metrics>Metrics</a></li><li><a href=#scaling-targets-discovery-and-other-features>Scaling targets discovery and other features</a></li></ul></nav></div></div></div></div><div class="page-links d-none d-xl-block"><h3></h3><nav id=TableOfContents><ul><li><a href=#dynamically-discovered-targets>Dynamically Discovered Targets</a></li><li><a href=#targets-configuration>Targets Configuration</a><ul><li><a href=#static-targets>Static targets</a></li><li><a href=#file-based-targets>File based targets</a></li><li><a href=#k8s-targets>K8s targets</a></li><li><a href=#gcp-targets>GCP targets</a></li></ul></li><li><a href=#probe-configuration-through-target-fields>Probe configuration through target fields</a></li><li><a href=#metrics>Metrics</a></li><li><a href=#scaling-targets-discovery-and-other-features>Scaling targets discovery and other features</a></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9 mx-xl-auto"><h1>Targets</h1><p class=lead></p><nav class=d-xl-none aria-label="Quaternary navigation"><div class=d-xl-none><button class="btn btn-outline-primary btn-sm doks-toc-toggle collapsed" type=button data-bs-toggle=collapse data-bs-target=#onThisPage aria-controls=doks-docs-nav aria-expanded=false aria-label="Toggle On this page navigation">
<span></span>
<span><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" class="doks doks-expand" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Expand</title><polyline points="7 13 12 18 17 13"/><polyline points="7 6 12 11 17 6"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" class="doks doks-collapse" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Collapse</title><polyline points="17 11 12 6 7 11"/><polyline points="17 18 12 13 7 18"/></svg></span></button><div class=collapse id=onThisPage><div class="card card-body mt-3 py-1"><div class=page-links><nav id=TableOfContents><ul><li><a href=#dynamically-discovered-targets>Dynamically Discovered Targets</a></li><li><a href=#targets-configuration>Targets Configuration</a><ul><li><a href=#static-targets>Static targets</a></li><li><a href=#file-based-targets>File based targets</a></li><li><a href=#k8s-targets>K8s targets</a></li><li><a href=#gcp-targets>GCP targets</a></li></ul></li><li><a href=#probe-configuration-through-target-fields>Probe configuration through target fields</a></li><li><a href=#metrics>Metrics</a></li><li><a href=#scaling-targets-discovery-and-other-features>Scaling targets discovery and other features</a></li></ul></nav></div></div></div></div><div class="page-links d-none d-xl-block"><h3></h3><nav id=TableOfContents><ul><li><a href=#dynamically-discovered-targets>Dynamically Discovered Targets</a></li><li><a href=#targets-configuration>Targets Configuration</a><ul><li><a href=#static-targets>Static targets</a></li><li><a href=#file-based-targets>File based targets</a></li><li><a href=#k8s-targets>K8s targets</a></li><li><a href=#gcp-targets>GCP targets</a></li></ul></li><li><a href=#probe-configuration-through-target-fields>Probe configuration through target fields</a></li><li><a href=#metrics>Metrics</a></li><li><a href=#scaling-targets-discovery-and-other-features>Scaling targets discovery and other features</a></li></ul></nav></div></nav><p>Cloudprober probes usually run against some targets<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> to check those targets'
status, such as an HTTP probe to your APIs servers, or PING/TCP probes to a
third-party provider to verify network connectivity to them. Each probe can have
multiple targets. If a probe has multiple targets, Cloudprober runs parallel
probes for each target. This page further explains how targets work in
Cloudprober.</p><figure class="img-fluid lazyload blur-up"><img src=https://cloudprober.org/docs/how-to/targets/targets.svg width=350></figure><h2 id=dynamically-discovered-targets>Dynamically Discovered Targets <a href=#dynamically-discovered-targets class=anchor aria-hidden=true>#</a></h2><p>One of the core features of Cloudprober is the automatic and continuous
discovery of targets. This feature is especially important for the dynamic
environments that today&rsquo;s cloud based deployments make possible. For example in
a kubernetes cluster the number of pods and their IPs can change on the fly,
either in response to replica count changes or node failures. Automated targets
discovery makes sure that we don&rsquo;t have to reconfigure Cloudprober in response
to such events.</p><figure class="img-fluid lazyload blur-up"><img src=https://cloudprober.org/docs/how-to/targets/targets2.svg width=350></figure><h2 id=targets-configuration>Targets Configuration <a href=#targets-configuration class=anchor aria-hidden=true>#</a></h2><p>Cloudprober provides multiple ways to configure targets for a probe.</p><h3 id=static-targets>Static targets <a href=#static-targets class=anchor aria-hidden=true>#</a></h3><p>Static targets are the easiest and most straight-forward to configure:</p><pre><code class=language-shell>probe {
  ...
  targets {
    host_names: &quot;www.google.com,www.yahoo.com,cloudprober:9313&quot;
  }
  ..
}
</code></pre><p>In the above config, probe will run against 3 hosts in parallel:
<em>www.google.com</em>, <em>www.yahoo.com</em>, and <em>cloudprober:9313</em> (yes, you can specify
ports here for port-aware probes).</p><p>You can specify more detailed targets using the
<a href=https://cloudprober.org/docs/config/targets/#cloudprober_targets_TargetsDef><code>endpoints</code></a> field. Using
endpoints, you can even specify the URL directly in target definition; this
method is particularly useful if you want to run an HTTP probe for multiple
similar targets.</p><pre><code class=language-shell>probe {
  type: HTTP
  ...
  targets {
    endpoint {
      # This will probe https://web.example.com/url1, target will show up as
      # &quot;frontend_main&quot; in metrics.
      name: &quot;frontend_main&quot;
      url: &quot;https://web.example.com/url1&quot;
    }
    endpoint {
      # This will probe http://cms.example.com, target will show up as
      # &quot;cms.example.com&quot; in metrics.
      name: &quot;cms.example.com&quot;
    }
  }
  ..
}
</code></pre><h3 id=file-based-targets>File based targets <a href=#file-based-targets class=anchor aria-hidden=true>#</a></h3><p>You can define your targets in a file and refer to them in Cloudprober through
that file. This file can be modified independently, and whenever that happens
cloudprober will reload it automatically.</p><p>Example configuration:</p><pre><code class=language-bash>targets {
  file_targets {
    file_path: &quot;/var/run/cloudprober/vips.json&quot;
  }
}
</code></pre><p>In the targets file, resources should be specified in a specific format. Here is
an example of targets in JSON format:</p><pre><code class=language-json>{
  &quot;resource&quot;: [
    {
      &quot;name&quot;: &quot;switch-xx-1&quot;,
      &quot;ip&quot;: &quot;10.1.1.1&quot;,
      &quot;port&quot;: 8080,
      &quot;labels&quot;: {
        &quot;device_type&quot;: &quot;switch&quot;,
        &quot;cluster&quot;: &quot;xx&quot;
      }
    },
    {
      &quot;name&quot;: &quot;switch-xx-2&quot;,
      &quot;ip&quot;: &quot;10.1.1.2&quot;,
      &quot;port&quot;: 8081,
      &quot;labels&quot;: {
        &quot;cluster&quot;: &quot;xx&quot;
      }
    }
  ]
}
</code></pre><p><span class=small>(You can also define targets in the textproto format: <a href=https://github.com/cloudprober/cloudprober/blob/master/rds/file/testdata/targets1.textpb>example</a>.
Full example with cloudprober.cfg:
<a href=https://github.com/cloudprober/cloudprober/blob/master/examples/file_based_targets>file_based_targets</a>)</span></p><p>Even if you don&rsquo;t intend to use the auto-reload feature of the file targets,
they can still be quite useful over static targets as they allow you to specify
additional details for targets. For example, specifying target&rsquo;s IP address in
the example above lets you tackle the case where you want to specify target&rsquo;s
name, let&rsquo;s say for better identification or for HTTP requests to work, but
don&rsquo;t want to rely on DNS for resolving its IP address.</p><h3 id=k8s-targets>K8s targets <a href=#k8s-targets class=anchor aria-hidden=true>#</a></h3><p>K8s targets are explained at <a href=https://cloudprober.org/docs/how-to/k8s_targets/#kubernetes-targets>Kubernetes
Targets</a>.</p><h3 id=gcp-targets>GCP targets <a href=#gcp-targets class=anchor aria-hidden=true>#</a></h3><p>Since Cloudprober started at GCP, it&rsquo;s no surprise that Cloudprober has great
support for GCP targets. Cloudprober supports the following GCP resources:</p><ul><li>GCE Instances</li><li>Forwarding Rules (regional and global)</li><li>Cloud pub/sub (list of hostnames over cloud pub/sub)</li></ul><p>TODO: Add more details on GCP targets.</p><h2 id=probe-configuration-through-target-fields>Probe configuration through target fields <a href=#probe-configuration-through-target-fields class=anchor aria-hidden=true>#</a></h2><table><thead><tr><th>Field</th><th>Probe Type</th><th>Configuration</th></tr></thead><tbody><tr><td><code>port</code></td><td>Port aware probes (HTTP, DNS, TCP, UDP, etc)</td><td>If a target has an associated port, for example, a Kubernetes endpoint, it will automatically be used for probing unless a port has been explicitly configured in the probe.</td></tr><tr><td><code>label:relative_url</code></td><td>HTTP</td><td>If an explicit relative URL is not set, HTTP probe will use <code>relative_url</code> label&rsquo;s value if set.</td></tr><tr><td><code>label:fqdn</code></td><td>HTTP</td><td>HTTP probe will use target&rsquo;s <code>fqdn</code> label as the URL-host (host part of the URL) and Host header if available and if Host header has not been configured explicitly.</td></tr></tbody></table><h2 id=metrics>Metrics <a href=#metrics class=anchor aria-hidden=true>#</a></h2><ul><li>Target name: All metrics generated by Cloudprober have a <code>dst</code> label which is
set to the target name.</li><li>Target labels: See <a href=https://cloudprober.org/docs/how-to/additional-labels/>additional labels</a> for
how resource labels can be used to set additional labels on the metrics.</li></ul><h2 id=scaling-targets-discovery-and-other-features>Scaling targets discovery and other features <a href=#scaling-targets-discovery-and-other-features class=anchor aria-hidden=true>#</a></h2><p>If you run a lot of Cloudprober instances with targets discovery, you may end up
overwhelming the API servers, or running out of your API quota in case of Cloud
resources. To avoid that, Cloudprober allows centralizing the targets discovery
through the Resource Discovery Service (RDS) mechanism. See <a href=https://cloudprober.org/docs/how-to/rds/>Resource Discovery
Service</a> for more details on that.</p><p>Other salient features of the cloudprober&rsquo;s targets discovery:</p><ul><li>Continuous discovery. We don&rsquo;t just discover targets in the beginning, but
keep refreshing them at a regular interval.</li><li>Protection against the upstream provider failures. If refreshing of the
targets fails during one of the refresh cycles, we continue using the existing
set of targets.</li></ul><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>There are some cases where there is no explicit target, for example, you may
run a probe to measure your CI system&rsquo;s performance, or run a complex probe
that touches many endpoints.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div><div class="page-footer-meta d-flex flex-column flex-md-row justify-content-between"></div><div class="docs-navigation d-flex justify-content-between"><a href=https://cloudprober.org/docs/how-to/percentiles/><div class="card my-1"><div class="card-body py-2">&larr; Percentiles, Histograms, and Distributions</div></div></a><a class=ms-auto href=https://cloudprober.org/docs/config/alerting/><div class="card my-1"><div class="card-body py-2">Alerting Config &rarr;</div></div></a></div></main></div></div></div><footer class="footer text-muted"><div class=container-xxl><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>Website powered by <a class=text-muted href=https://gohugo.io/>Hugo</a>, and <a class=text-muted href=https://getdoks.org/>Doks</a></li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline></ul></div></div></div></footer><script src=https://cloudprober.org/js/bootstrap.min.87685cf4e6585276ff9e7b5d0b97e792615af6921e77821315d1ca7c5511ac2f30667e16c0d031e680ca8b57f63f6c0f6c4a232da777cce474b501ed81e090a9.js integrity="sha512-h2hc9OZYUnb/nntdC5fnkmFa9pIed4ITFdHKfFURrC8wZn4WwNAx5oDKi1f2P2wPbEojLad3zOR0tQHtgeCQqQ==" crossorigin=anonymous defer></script>
<script src=https://cloudprober.org/js/highlight.min.6d2ae9724e2da3febf052f9f9979776c542ecb50cd20d7280148c1eef7d0f76d3d84f82b8d3b10a209294618236691747c95c658e350ffac326cde26caf84347.js integrity="sha512-bSrpck4to/6/BS+fmXl3bFQuy1DNINcoAUjB7vfQ9209hPgrjTsQogkpRhgjZpF0fJXGWONQ/6wybN4myvhDRw==" crossorigin=anonymous defer></script>
<script src=https://cloudprober.org/main.min.162c56a0426544de0d010e66c56e321579655c400c9aae06a6823e7682de379adadf2165bd416fea191e4e7e410fbf1fd2c35a759aa43ff2e3787067669bf81b.js integrity="sha512-FixWoEJlRN4NAQ5mxW4yFXllXEAMmq4GpoI+doLeN5ra3yFlvUFv6hkeTn5BD78f0sNadZqkP/LjeHBnZpv4Gw==" crossorigin=anonymous defer></script>
<script src=https://cloudprober.org/index.min.429d73e440bf533e628d9092ccf7f8dbc94dfa7ea90e2ca6c6c1ebc316c9ecb2ab759dc07f34e5b322fb1737908613e78d2b382309cb1de96b517ef037754071.js integrity="sha512-Qp1z5EC/Uz5ijZCSzPf428lN+n6pDiymxsHrwxbJ7LKrdZ3AfzTlsyL7FzeQhhPnjSs4IwnLHelrUX7wN3VAcQ==" crossorigin=anonymous defer></script></body></html>