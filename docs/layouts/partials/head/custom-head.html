<!-- Google tag (gtag.js) -->
<script
  async
  src="https://www.googletagmanager.com/gtag/js?id=G-FHHPC1TNQV"
></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag('js', new Date());

  gtag('config', 'G-FHHPC1TNQV');
</script>

<!-- Old analytics id, remove once GA4 property looks good. -->
<script>
  (function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    (i[r] =
      i[r] ||
      function () {
        (i[r].q = i[r].q || []).push(arguments);
      }),
      (i[r].l = 1 * new Date());
    (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m);
  })(
    window,
    document,
    'script',
    'https://www.google-analytics.com/analytics.js',
    'ga'
  );
  /* General initialization */
  ga('create', 'UA-79661-8', 'auto');
  ga('set', 'anonymizeIp', true);
  ga('send', 'pageview');
  /* Track outbound links */
  var buttons = document.querySelectorAll('a');
  Array.prototype.map.call(buttons, function (item) {
    if (item.host != document.location.host) {
      item.addEventListener('click', function () {
        var action = item.getAttribute('data-action') || 'follow';
        ga('send', 'event', 'outbound', action, item.href);
      });
    }
  });
  /* Register handler to log search on blur */
  var query = document.querySelector('.query');
  if (query) {
    query.addEventListener('blur', function () {
      if (this.value) {
        var path = document.location.pathname;
        ga('send', 'pageview', path + '?q=' + this.value);
      }
    });
  }
</script>
