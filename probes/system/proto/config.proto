syntax = "proto2";

package cloudprober.probes.system;

option go_package = "github.com/cloudprober/cloudprober/probes/system/proto";

message ResourceUsage {
  optional bool disabled = 1;
  optional bool export_aggregated_stats = 2 [default = true];
  optional bool export_individual_stats = 3 [default = false];
  optional string include_name_regex = 4;
  optional string exclude_name_regex = 5;
}

message ProbeConf {
  // Export system-wide file descriptor stats (from /proc/sys/fs/file-nr)
  // Metrics: system_file_descriptors_allocated, system_file_descriptors_max
  optional bool disable_file_descriptors = 1;

  // Export process metrics (from /proc/stat)
  // Metrics: system_procs_running, system_procs_blocked, system_procs_total
  optional bool disable_proc_stats = 2;

  // Export socket stats (from /proc/net/sockstat)
  // Metrics: system_sockets_in_use, system_sockets_tcp_in_use, etc.
  optional bool disable_sock_stats = 3;

  // Export system uptime (from /proc/uptime)
  // Metrics: system_uptime_sec
  optional bool disable_uptime = 4;

  // Export load average (from /proc/loadavg)
  // Metrics: system_load_1m, system_load_5m, system_load_15m
  optional bool disable_load_avg = 5;

  // Metrics: system_net_rx_bytes, system_net_tx_bytes, system_net_rx_errors, etc.
  optional ResourceUsage net_dev_stats = 6;

  // Export memory usage (from /proc/meminfo)
  // Metrics: system_mem_total, system_mem_free, system_mem_available, system_mem_buffers, system_mem_cached
  optional bool disable_memory_usage = 7;

  // Export disk I/O stats (from /proc/diskstats)
  // Metrics: system_disk_read_bytes, system_disk_write_bytes, etc.
  optional ResourceUsage disk_io_stats = 9;

  // Export disk usage stats (from df)
  // Metrics: system_disk_total, system_disk_free
  optional ResourceUsage disk_usage_stats = 10;
}
